window.onload=function(){const e="https://deckofcardsapi.com/api/deck/new/draw/?count=",t=document.getElementsByClassName("js--kaartenwaardes"),n=document.getElementsByClassName("js--chair"),a=document.getElementById("js--text"),i=document.getElementById("js--nextButton"),s=document.getElementById("js--dealersCardText"),l=document.getElementById("js--playersCardText");var r=1,o=0;const u=document.getElementsByClassName("js--playerCard"),d=document.getElementsByClassName("js--dealerCard");let c=document.getElementById("js--playerTotalCardValue"),b=document.getElementById("js--dealerTotalCardValue");var p=.13;const m=document.getElementById("js--hit"),v=document.getElementById("js--stand"),g=document.getElementById("js--doubleDown");let A=document.getElementById("js--geld");var k=document.getElementById("js--whowon");let j=!1;var w=!1,h=document.getElementById("js--cheats");let f=!0,y=!0,B=!1,E=-2.4,I=2,L=-2,z=[],C=0,D=0,_=parseInt(A.getAttribute("value")),T=0,J=0,S=document.getElementsByClassName("chips");const H=document.getElementById("js--scene");let x=document.getElementById("js--parentcamera"),K=!0;var N=[],P=[],W=[];const O=document.getElementById("js--playerTutorialCard1"),V=document.getElementById("js--playerTutorialCard2"),G=document.getElementById("js--playerTutorialCard3"),Z=document.getElementById("js--dealerTutorialCard1"),M=document.getElementById("js--dealerTutorialCard2"),Q=document.getElementById("js--dealerTutorialCard3"),q=document.getElementById("js--speechbubble"),F=document.getElementById("js--text2"),R=new Audio("sound/2_intro.wav"),U=new Audio("sound/3_WaardesKaarten.wav"),X=new Audio("sound/4_deAas.wav"),Y=new Audio("sound/5_hoejewint.wav"),$=new Audio("sound/6_inzetten.wav"),ee=new Audio("sound/7_hitknop.wav"),te=new Audio("sound/8_stand.wav"),ne=new Audio("sound/9_winst1.wav"),ae=new Audio("sound/10_doubledown.wav"),ie=new Audio("sound/dealerdood.wav"),se=new Audio("sound/zetGeldIn.wav"),le=new Audio("sound/50euroinzet.wav"),re=new Audio("sound/25euroinzet.wav"),oe=new Audio("sound/10euroinzet.wav"),ue=new Audio("sound/5euroinzet.wav"),de=new Audio("sound/hitSound.wav"),ce=new Audio("sound/standSound.wav"),be=new Audio("sound/doubledownSound.wav"),pe=new Audio("sound/blackjackPlayerSound.wav"),me=new Audio("sound/playerteHoogSound.wav"),ve=new Audio("sound/dealertehoogSound.wav"),ge=new Audio("sound/drawSound.wav"),Ae=new Audio("sound/meerDanDealer.wav"),ke=new Audio("sound/minderDanDealer.wav");function je(e,t){if(1==e&&(v.setAttribute("visible","false"),m.setAttribute("visible","false"),g.setAttribute("visible","false")),0==K)for(let e=0;e<S.length;e++)S[e].setAttribute("position",N[e]),S[e].setAttribute("rotation",W[e]),S[e].setAttribute("scale",P[e]);else if(1==K){for(let e=0;e<S.length;e++)N.push(Object.assign({},S[e].getAttribute("position"))),P.push(Object.assign({},S[e].getAttribute("scale"))),W.push(Object.assign({},S[e].getAttribute("rotation")));S[0].getAttribute("position"),K=!1}for(let e=0;e<S.length;e++)S[e].setAttribute("visible","true"),S[e].classList.add("clickable");S[0].onclick=(n=>{We(50),ye(!0),we(S[0]),he(S[0]),S[0].classList.remove("clickable"),1==e&&(Te(),He(!0),_e(),De(),fe(),0==t&&(Le("Je hebt 50 euro ingezet."),se.pause(),se.src=se.src,le.play()))}),S[1].onclick=(n=>{We(25),ye(!0),we(S[1]),he(S[1]),S[1].classList.remove("clickable"),1==e&&(Te(),He(!0),_e(),De(),fe(),0==t&&(Le("Je hebt 25 euro ingezet."),se.pause(),se.src=se.src,re.play()))}),S[2].onclick=(n=>{We(10),ye(!0),we(S[2]),he(S[2]),S[2].classList.remove("clickable"),1==e&&(Te(),He(!0),_e(),De(),fe(),0==t&&(Le("Je hebt 10 euro ingezet."),se.pause(),se.src=se.src,oe.play()))}),S[3].onclick=(n=>{We(5),ye(!0),we(S[3]),he(S[3]),S[3].classList.remove("clickable"),1==e&&(Te(),He(!0),_e(),De(),fe(),0==t&&(Le("Je hebt 5 euro ingezet."),se.pause(),se.src=se.src,ue.play()))})}function we(e){let t=document.createAttribute("animation"),n=document.createAttribute("animation__2"),a=document.createAttribute("animation__3");t.value="property: position; easing: linear; dur: 500; to: 0 1.3 -2.33",e.setAttribute("animation",t.value),n.value="property: rotation; easing: linear; dur: 500; to: 0 0 0",Oe(500).then(()=>{e.setAttribute("animation",n.value)}),a.value="property: scale; easing: linear; dur: 500; to: 0.1 0.1 0.1",Oe(1e3).then(()=>{e.setAttribute("animation",a.value)})}function he(e){for(let t=0;t<4;t++)S[t]!==e&&S[t].setAttribute("visible","false")}function fe(){for(let e=0;e<d.length;e++)d[e].setAttribute("visible","true"),u[e].setAttribute("visible","true");s.setAttribute("visible","true"),b.setAttribute("visible","true"),c.setAttribute("visible","true"),l.setAttribute("visible","true")}function ye(e){if(2==r){R.play();for(let e=0;e<n.length;e++)n[e].classList.remove("clickable");Ie(q,!0),Ie(i,"true"),i.classList.add("clickable"),Le("Bij dit spel wordt er tegen een dealer \ngespeeld. Het doel is om een hoger puntenaantal dan de dealer te behalen \nzonder jezelf dood te kopen.")}if(3==r){R.pause(),U.play(),Le("Dit zijn de waardes van de kaarten.");for(let e=0;e<t.length;e++)t[e].setAttribute("visible","true")}if(4==r&&(U.pause(),X.play(),Le("De aas is normaal 11 waard, maar als je puntenaantal hoger dan 21 is, veranderd \nde waarde van de aas naar 1.")),5==r){X.pause(),Y.play(),Le("Je wint dus door een hoger punten-\naantal te halen dan de dealer. Maar je\n moet er ook op letten dat je niet hoger \ndan 21 koopt, dat betekend dat je verliest. \nDit geld ook voor de dealer.");for(let e=t.length-1;e>0;e=t.length-1)t[e].remove();t[0].remove()}6==r&&(Y.pause(),$.play(),Le("Voordat het spel begint wordt er geld \ningezet. Als je wint krijg je deze \ninzet dubbel terug. Heb je met \nje eerste 2 kaarten blackjack (21), dan krijg \nje je inzet x 2.5 terug. Kijk nu naar een \ninzet munt om in te zetten"),Ee(),je()),7==r&&($.pause(),ee.play(),Le("Nu begint het spel. Kijk naar de hit knop \nom een kaart te kopen."),O.setAttribute("src","https://deckofcardsapi.com/static/img/5H.png"),V.setAttribute("src","https://deckofcardsapi.com/static/img/4S.png"),Z.setAttribute("src","https://deckofcardsapi.com/static/img/8S.png"),M.setAttribute("src","img/backside2.jpg"),c.setAttribute("value","9"),b.setAttribute("value","8"),Ie(O,!0),Ie(V,!0),Ie(Z,!0),Ie(M,!0),Ie(b,!0),Ie(c,!0),Ie(l,!0),Ie(s,!0),Ie(m,!0),He(!1),Ie(i,!1)),8==r&&(Le("Wanneer je tevreden bent met het aantal punten druk je op stand. In deze \nsituatie is de kans te groot om boven \nde 21 te kopen, dus kijk nu naar stand."),ee.pause(),te.play(),v.setAttribute("visible","true"),Ie(l,!0),Ie(s,!0),console.log(r)),9==r&&(te.pause(),ne.play(),Ee(),Le("Jij had 19 en de bank 18 dus heb je \ngewonnen! Zie je saldo. zet opnieuw in \nom een nieuw spel te starten."),je()),10==r&&(Le("Bij double down verdubbel je je inzet en \nkrijg je nog een kaart erbij. Hierna kan je \nniet nog een kaart krijgen en is het de \ndealers beurt. Kijk naar de double down \nknop."),ne.pause(),ae.play(),G.setAttribute("visible","false"),O.setAttribute("src","https://deckofcardsapi.com/static/img/7H.png"),V.setAttribute("src","https://deckofcardsapi.com/static/img/3D.png"),Z.setAttribute("src","https://deckofcardsapi.com/static/img/5S.png"),M.setAttribute("src","img/backside2.jpg"),c.setAttribute("value","10"),b.setAttribute("value","5"),g.setAttribute("visible","true"),g.classList.add("clickable"),Ie(O,!0),Ie(V,!0),Ie(Z,!0),Ie(M,!0),Ie(b,!0),Ie(c,!0),Ie(l,!0),Ie(s,!0)),11==r&&(O.remove(),V.remove(),G.remove(),Z.remove(),M.remove(),Q.remove(),b.setAttribute("value",0),c.setAttribute("value",0),Be()),r++}function Be(){b.setAttribute("value",0),c.setAttribute("value",0);for(let e=0;e<d.length;e++)d[e].setAttribute("visible","false"),u[e].setAttribute("visible","false");ie.pause(),se.play(),h.setAttribute("visible","true"),h.classList.add("clickable"),Le("Zet geld in om te spelen!"),je(!0,!1)}function Ee(){Ie(O,!1),Ie(V,!1),Ie(G,!1),Ie(Z,!1),Ie(M,!1),Ie(b,!1),Ie(c,!1),Ie(l,!1),Ie(s,!1),i.classList.remove("clickable"),Ie(i,!1)}function Ie(e,t){e.setAttribute("visible",t)}function Le(e){a.setAttribute("value",e)}function ze(t,n){fetch(e+t).then(e=>e.json()).then(e=>{!function(e){C+=Je(e),"ace"==e&&T++;C>21&&0==T&&Ne()}(e.cards[0].value.toLowerCase()),n.setAttribute("src",e.cards[0].image),Se()})}function Ce(t,n){fetch(e+t).then(e=>e.json()).then(e=>{!function(e){D+=Je(e),"ace"==e&&J++;1==w&&D<17&&Ke("dealer");D>=17&&Ne()}(e.cards[0].value.toLowerCase()),n.setAttribute("src",e.cards[0].image),Se()})}function De(){for(let e=0;e<u.length;e++)ze(1,u[e])}function _e(){Ce(1,d[0]),d[1].setAttribute("src","#backside")}function Te(){v.setAttribute("visible","true"),m.setAttribute("visible","true"),g.setAttribute("visible","true"),v.classList.add("clickable"),m.classList.add("clickable"),g.classList.add("clickable")}function Je(e){return parseInt(e)<=10?parseInt(e):"string"==typeof e&&"ace"!==e?10:"ace"==e?11:void 0}function Se(){C>21&&T>0&&(C-=10,T--),D>21&&J>0&&(D-=10,J--),21==C&&Ne(),c.setAttribute("value",C),b.setAttribute("value",D)}function He(e){m.classList.add("clickable"),m.onclick=(t=>{0==e?(G.setAttribute("src","https://deckofcardsapi.com/static/img/KC.png"),G.setAttribute("visible","true"),c.setAttribute("value","19"),m.classList.remove("clickable"),v.classList.add("clickable"),ye()):(de.play(),Ke("player"),g.classList.remove("clickable"))}),v.onclick=(t=>{0==e?(M.setAttribute("src","https://deckofcardsapi.com/static/img/0D.png"),b.setAttribute("value","18"),v.classList.remove("clickable"),i.classList.add("clickable"),_+=2*o,A.setAttribute("value",_),Oe(2e3).then(()=>{ye()})):(ce.play(),xe())}),g.onclick=(t=>{0==e?(G.setAttribute("src","https://deckofcardsapi.com/static/img/QC.png"),G.setAttribute("visible","true"),c.setAttribute("value","20"),M.setAttribute("src","https://deckofcardsapi.com/static/img/9H.png"),b.setAttribute("value","14"),Q.setAttribute("src","https://deckofcardsapi.com/static/img/KD.png"),Q.setAttribute("visible","true"),b.setAttribute("value","24"),console.log("inzet: "+o),console.log("geld: "+_),_-=o,console.log("geld: "+_),o*=2,console.log("inzet: "+o),_+=2*o,console.log("geld: "+_),A.setAttribute("value",_),Le("De dealer heeft meer dan 21 punten, dus\n je hebt gewonnen!"),ae.pause(),ie.play(),Oe(4700).then(()=>{ye()})):(be.play(),_-=o,A.setAttribute("value",_),o*=2,Ke("player"),xe())})}function xe(){w=!0,Ce(1,d[1]),v.classList.remove("clickable"),m.classList.remove("clickable")}function Ke(e){let t=document.createElement("a-plane");if("player"==e){ze(1,t),I++,1==f?f=!1:0==f&&(p+=.24);var n=p+" 1.35 -2.69";t.setAttribute("position",n),t.setAttribute("scale","0.20 0.45 0.2"),t.setAttribute("rotation","-80 0 0")}if("dealer"==e){Ce(1,t),L--,t.setAttribute("scale","1 1.5 1"),1==y?y=!1:0==y&&0==B?(E-=.03,B=!0):1==B&&0==y&&(E-=.6);var a=E+" 3 -4.6";t.setAttribute("position",a),t.setAttribute("scale","0.5 0.75 0.5")}H.appendChild(t),z.push(t)}function Ne(){I=2,k.setAttribute("value",""),k.setAttribute("visible","true"),console.log(Pe()),v.classList.remove("clickable"),m.classList.remove("clickable"),g.classList.remove("clickable"),"player"==Pe()&&(_+=2*o,A.setAttribute("value",_)),"blackjackPlayer"==Pe()&&(_+=2.5*o,A.setAttribute("value",_)),"insuredDealer"==Pe()&&(_+=2*o,A.setAttribute("value",_)),Pe(),"draw"==Pe()&&(_+=o,A.setAttribute("value",_),Le("Gelijk spel!")),Oe(5e3).then(()=>{k.setAttribute("visible","false"),C=0,D=0,f=!0,function(){for(let e=0;e<z.length;e++)H.removeChild(z[e]);z=[]}(),w=!1,I=2,L=-2,y=!0,B=!1,E="-2.4",p=.13,J=0,T=0,Be()})}function Pe(){return console.log(D),21==C&&2==I?(pe.play(),Le("Blackjack! Je hebt 21 punten \n en wint de pot."),"blackjackPlayer"):21==D&&1==j?"insuredDealer":C>21?(me.play(),Le("Bust! Je hebt teveel punten \n en verliest de pot."),"dealer"):D>21?(ve.play(),Le("Win! de dealer heeft teveel punten. \n goed gedaan! "),"player"):D==C?(ge.play(),Le("Push! Het is gelijk spel. \n je krijgt je inzet terug."),"draw"):D<C?(Ae.play(),Le("Win! Je hebt meer punten dan de dealer. \n je wint 2x je inzet!"),"player"):D>C?(ke.play(),Le("Lose! Je hebt minder punten dan de dealer. \n je verliest je inzet."),"dealer"):void 0}function We(e){if(o=e,e>_)return!1;_-=e,A.setAttribute("value",_)}function Oe(e){return new Promise(t=>setTimeout(t,e))}!function(){for(let e=0;e<n.length;e++)n[e].onclick=(e=>{F.setAttribute("visible","false");let t=document.createAttribute("animation");t.value="property: position; easing: linear; dur: 2000; to: 0 0.5 -1.2",console.log(x),document.getElementById("rig").setAttribute("animation",t.value),r++,ye()})}(),i.addEventListener("click",function(e){ye()}),h.onclick=(e=>{console.log("hi"),C=21,Ne()})};
